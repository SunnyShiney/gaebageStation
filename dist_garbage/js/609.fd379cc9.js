"use strict";(self["webpackChunkgarbage"]=self["webpackChunkgarbage"]||[]).push([[609],{8609:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});a(768);var l=a(6492),n=a(9994),r=a(2185),u=(a(7774),a(365)),o=a.n(u),i=(a(1021),a(6437)),v=(a(7911),a(7819)),g=a(4221),h=a(6013),s=a(8777),d=a.n(s);a(91);const m=(0,l._)("h5",{class:"card-title",style:{"font-size":"30px",padding:"5px"}}," 垃圾大站（红星，西华）总量数据统计 ",-1),f={class:"site_name-header"},p=(0,l._)("h5",{class:"card-title",style:{"font-size":"25px",padding:"5px"}}," 垃圾量统计(日/周/月) ",-1),c={class:"site_name-header-search"},D=(0,l._)("div",{class:"card-header"},null,-1),w={class:"card-body"},Y=(0,l._)("h5",{class:"card-title",style:{"font-size":"25px",padding:"5px"}}," 垃圾大站总量趋势统计 ",-1),y={class:"card-body"},M={class:"data-view",style:{width:"100%"}},x={class:"card-Left",style:{width:"40%"}},b=(0,l._)("h5",{class:"card-title",style:{"font-size":"25px",padding:"5px"}}," 垃圾站当前报警 ",-1),_={class:"card-title",style:{"font-size":"25px",padding:"5px"}},N={class:"card-Right",style:{width:"60%"}},W=(0,l._)("h5",{class:"card-title",style:{"font-size":"25px",padding:"5px"}}," 过去一周各时段垃圾净重平均值统计 ",-1),F={class:"car-transport-header",style:{"margin-top":"8vh"}},A=(0,l._)("h5",{class:"card-title",style:{"font-size":"25px",padding:"5px"}}," 车辆运输量统计 ",-1),O={class:"car-transport-header-search"},z={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},T={class:"float-end",style:{"margin-top":"10px"}};var H={__name:"Jinniu",setup(e){(0,v.oR)();let t=(0,n.iH)(1e3),a=(0,n.iH)(1),u=0;const s=(0,n.iH)(""),H=(0,n.iH)("");let k=(0,n.iH)(""),U=(0,n.iH)(""),q=(0,n.iH)(""),V=(0,n.iH)("");(0,n.iH)(""),(0,n.iH)("");(0,n.iH)(!1);const S=(0,n.iH)([]),j=((0,n.iH)([]),(0,n.iH)([]),(0,n.iH)([])),C=e=>e.getTime()<new Date("2022-8-31").getTime()||e.getTime()>new Date("2023-3-8").getTime(),R=e=>{o()({url:"/api/car-by-site/"+e,method:"get"}).then((function(e){if(200==e.status){var t=e.data.data;S.value=t;var a={carNumber:"全部",sitename:"所有站点"};j.value.push(a);for(var l=0;l<S.value.length;l++)if("红星"==S.value[l].siteName){a={carNumber:S.value[l].carNumber,sitename:" "+S.value[l].siteName};j.value.push(a)}for(l=0;l<S.value.length;l++)if("西华"==S.value[l].siteName){a={carNumber:S.value[l].carNumber,sitename:" "+S.value[l].siteName};j.value.push(a)}for(l=0;l<S.value.length;l++)if("红花堰"==S.value[l].siteName&&""!=S.value[l].carNumber){a={carNumber:S.value[l].carNumber,sitename:" "+S.value[l].siteName};j.value.push(a)}for(l=0;l<S.value.length;l++)if("五块石"==S.value[l].siteName){a={carNumber:S.value[l].carNumber,sitename:" "+S.value[l].siteName};j.value.push(a)}for(l=0;l<S.value.length;l++)if("五里墩"==S.value[l].siteName){a={carNumber:S.value[l].carNumber,sitename:" "+S.value[l].siteName};j.value.push(a)}console.log("数据长度："+t.length)}}))};R("all");const P=[{value:"day",label:"按天查询"},{value:"month",label:"按月查询"}],L=[{value:"day",label:"按天查询"},{value:"month",label:"按月查询"}];var I=(0,n.iH)(),K=(0,n.iH)(""),B=(0,n.iH)("");const E=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();K=E,B=E;var J=E;console.log("transport_start"+J);const G=()=>{var e="all";if(console.log("扯皮爱好："+s.value),"全部所有站点"!=s.value&&"全部"!=s.value&&""!=s.value){var t=s.value.lastIndexOf(" ");H.value=s.value.substring(t+1,s.value.length),s.value=s.value.substring(0,t),e=s.value}if(console.log("查到的值："+e),""==U.value)K=d()().format("YYYY-MM-DD"),B=d()().format("YYYY-MM-DD");else{var a=new Date(U.value),l=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();if(K=l,"day"==k.value&&(K=d()(U.value[0]).format("YYYY-MM-DD"),B=d()(U.value[1]).format("YYYY-MM-DD")),"week"==k.value){const e=new Date(new Date(U.value).getTime()+864e5*(6-new Date(U.value).getDay()));B=d()(e).format("YYYY-MM-DD")}"month"==k.value&&(K=d()(U.value[0]).startOf("month").format("YYYY-MM-DD"),B=d()(U.value[1]).month()==d()().month()?d()().format("YYYY-MM-DD"):d()(U.value[1]).endOf("month").format("YYYY-MM-DD"))}X(K,B,"all",1,1e4,e),"全部所有站点"==s.value||"全部"==s.value||""==s.value?s.value="全部":s.value=s.value+" "+H.value},Q=(0,n.qj)([]),X=(e,l,n,r,i,v)=>{o()({url:"/api/dump-record/dump_car/"+e+"/"+l+"/"+n+"/"+r+"/"+i,method:"get"}).then((function(n){if(200==n.status){Q.splice(0,Q.length);var o=n.data.data.records;if("all"==v){for(var i in o)if("红星"==o[i].siteName){var g={day:e+" 至 "+l,siteName:o[i].siteName,carNumber:o[i].carNumber,frequency:o[i].frequency,avgWeight:o[i].avgWeight,totalWeight:o[i].totalWeight};Q.push(g)}for(var i in o)if("西华"==o[i].siteName){g={day:e+" 至 "+l,siteName:o[i].siteName,carNumber:o[i].carNumber,frequency:o[i].frequency,avgWeight:o[i].avgWeight,totalWeight:o[i].totalWeight};Q.push(g)}for(var i in o)if("红花堰"==o[i].siteName){g={day:e+" 至 "+l,siteName:o[i].siteName,carNumber:o[i].carNumber,frequency:o[i].frequency,avgWeight:o[i].avgWeight,totalWeight:o[i].totalWeight};Q.push(g)}for(var i in o)if("五块石"==o[i].siteName){g={day:e+" 至 "+l,siteName:o[i].siteName,carNumber:o[i].carNumber,frequency:o[i].frequency,avgWeight:o[i].avgWeight,totalWeight:o[i].totalWeight};Q.push(g)}for(var i in o)if("五里墩"==o[i].siteName){g={day:e+" 至 "+l,siteName:o[i].siteName,carNumber:o[i].carNumber,frequency:o[i].frequency,avgWeight:o[i].avgWeight,totalWeight:o[i].totalWeight};Q.push(g)}I.value=Q}else for(var i in o)if(v==o[i].carNumber&&H.value==o[i].siteName){g={day:e+" 至 "+l,siteName:o[i].siteName,carNumber:o[i].carNumber,avgWeight:o[i].avgWeight,frequency:o[i].frequency,totalWeight:o[i].totalWeight};Q.push(g),I.value=Q}console.log("数据长度："+o.length),t.value=Q.length,u=parseInt(Q.length)%10,a.value=r}}))};X(J,J,"all",1,1e4,"all");const Z=e=>{a.value=e},$=()=>{const e=["时间","站点名称","车牌号","运输次数","单次平均运输量/kg","运输总量/kg"];ee(I.value,"金牛区"+K+"至"+B+"车辆运输量统计",e,"sheetName")};function ee(e,t,a,l){var n=new Array,r=new Array;const u=function(e){var t=0;for(var a in e)e.hasOwnProperty(a)&&t++;return t};for(const g in e)if(e.hasOwnProperty(g)){const t=e[g];var o=new Array;for(const e in t)if(t.hasOwnProperty(e)){const a=t[e];o.push(a),r.length<u(t)&&r.push(e)}n.push(o)}n.splice(0,0,r,a),console.log("data",n);const i=g.P6.aoa_to_sheet(n),v=g.P6.book_new();let h=[{wpx:160},{wpx:80},{wpx:80},{wpx:80},{wpx:160},{wpx:160}];i["!cols"]=h;var s=[{hidden:!0}];i["!rows"]=s,g.P6.book_append_sheet(v,i,l),g.NC(v,t+".xlsx")}const te=(0,n.iH)([]),ae=(0,n.iH)([]);var le=d()().format("YYYY-MM-DD");ae.value[0]=d()().add(-4,"d").format("YYYY-MM-DD"),ae.value[1]=d()().add(-3,"d").format("YYYY-MM-DD"),ae.value[2]=d()().add(-2,"d").format("YYYY-MM-DD"),ae.value[3]=d()().add(-1,"d").format("YYYY-MM-DD"),ae.value[4]=le;const ne=(0,n.iH)(0),re=(0,n.qj)({title:{text:"金牛区垃圾总量"},xAxis:{name:"日期",data:ae},yAxis:{name:"垃圾净重",data:"value",min:0},series:[{data:te,type:"bar",label:{show:!0,formatter:"{value} 吨"}}]}),ue=()=>{var e,t;if((0,h.z8)("固定展示五个日/周/月，其余可导出报表查看详细信息！"),ae.value=[],""==V.value)(0,h.z8)({message:"请选择相应日期",type:"error"});else{var a=new Date(V.value);a.getFullYear(),a.getMonth(),a.getDate();if("day"==q.value){e=d()(V.value[0]).format("YYYY-MM-DD"),t=d()(V.value[1]).format("YYYY-MM-DD");for(var l=0;l<=4;l++)ae.value[l]=d()(V.value[0]).add(l,"d").format("YYYY-MM-DD"),console.log(ae.value[l]),oe(ae.value[l],ae.value[l],"西华",1,1e4,l)}if("week"==q.value){e=d()(V.value[0]).format("YYYY-MM-DD"),t=d()(V.value[1]).format("YYYY-MM-DD");for(l=0;l<=4;l++)ae.value[l]=d()(e).add(l,"d").format("YYYY-MM-DD"),oe(ae.value[l],ae.value[l],"西华",1,1e4,l),ae.value[l]=e+" 至 "+d()(e).add(6,"d").format("YYYY-MM-DD"),e=d()(e).add(7,"day").format("YYYY-MM-DD")}if("month"==q.value){e=d()(V.value[0]).format("YYYY-MM-DD");for(var n=0;n<=4;n++)e=d()(V.value[0]).add(n,"months").format("YYYY-MM-DD"),t=d()(e).month()==d()().month()?d()().format("YYYY-MM-DD"):d()(e).endOf("month").format("YYYY-MM-DD"),oe(e,t,"西华",1,1e4,n),ae.value[n]=d()(e).startOf("month").format("YYYY-MM")}}};(0,n.qj)([]);(0,n.iH)();const oe=(e,t,a,l,n,r)=>{o()({url:"/api/dump-record/dump_car/"+e+"/"+t+"/"+a+"/"+l+"/"+n,method:"get"}).then((function(e){if(200==e.status){var t=e.data.data.records;ne.value=0;for(let e=0;e<t.length;e++)ne.value=t[e].totalWeight+ne.value;ne.value=Math.floor(ne.value/1e3*100)/100,te.value[r]=Number(ne.value.toFixed(0))}}))},ie=e=>{for(var t=0;t<7;t++)oe(e.value[t],e.value[t],"西华",1,1e4,t)};ie(ae);const ve=(e,t,a)=>{o()({url:"/api/dump-record/site_data_day/"+e+"/"+t+"/"+a,method:"get",responseType:"blob"}).then((function(e){if(200==e.status){console.log("成功了！");let t=new Blob([e.data],{type:e.type}),a=e.headers["content-disposition"];a=decodeURIComponent(a.split("filename=")[1]);let l=document.createElement("a"),n=window.URL.createObjectURL(t);l.href=n,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(n)}}))};var ge=d()().add(-4,"d").format("YYYY-MM-DD"),he=le;const se=()=>{null!=V.value[0]&&null!=V.value[1]&&("day"==q.value&&(ge=d()(V.value[0]).format("YYYY-MM-DD"),he=d()(V.value[1]).format("YYYY-MM-DD")),"month"==q.value&&(ge=d()(V.value[0]).startOf("month").format("YYYY-MM-DD"),he=d()(V.value[1]).endOf("month").format("YYYY-MM-DD"))),ve(ge,he,"all")};(0,n.iH)("");var de=(new Date).getTime(),me=new Date(de-6048e5),fe=new Date(de-26784e5);me.getFullYear(),me.getMonth(),me.getDate(),fe.getFullYear(),fe.getMonth(),fe.getDate(),(new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds(),(0,n.iH)(0);const pe=(0,n.iH)(0),ce=(0,n.iH)({name:"正常",type:"success"});let De=(0,n.iH)(1e3),we=((0,n.iH)(1),0);const Ye=(0,n.iH)([]),ye=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),Me=new Date(de+864e5).getFullYear()+"-"+(new Date(de+864e5).getMonth()+1)+"-"+new Date(de+864e5).getDate();K=ye;const xe=(0,n.iH)(2),be=(0,n.iH)(2),_e=(0,n.iH)(2),Ne=((0,n.iH)(0),(0,n.iH)([0,0])),We=(0,n.iH)([0,0,0,0,0,0]),Fe=(0,n.iH)([0,0,0,0,0,0,0]),Ae=(0,n.iH)([0,0,0,0,0,0,0]),Oe=(0,n.qj)({zero_four:0,four_eight:0,eight_twelve:0,twelve_sixteen:0,sixteen_twenty:0,twenty_zero:0});(0,l.wF)((()=>{var e=0;(0,i.pm)("红星","transporter",ye+"T00%3A00%3A00",ye+"T04%3A00%3A00",1,1e4).then((function(e){Ae.value.splice(0,6);for(let t=0;t<e.length;t++)Oe.zero_four=e[t].netWeight+Oe.zero_four})),(0,i.pm)("西华","transporter",ye+"T00%3A00%3A00",ye+"T04%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.zero_four=e[t].netWeight+Oe.zero_four;Oe.zero_four=Math.floor(Oe.zero_four/1e3*100)/100,Ae.value[0]=Oe.zero_four})),(0,i.pm)("红星","transporter",ye+"T04%3A00%3A00",ye+"T08%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.four_eight=e[t].netWeight+Oe.four_eight;Oe.four_eight=Math.floor(Oe.four_eight/1e3*100)/100})),(0,i.pm)("西华","transporter",ye+"T04%3A00%3A00",ye+"T08%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.four_eight=e[t].netWeight+Oe.four_eight;Oe.four_eight=Math.floor(Oe.four_eight/1e3*100)/100,Ae.value[1]=Oe.four_eight})),(0,i.pm)("红星","transporter",ye+"T08%3A00%3A00",ye+"T12%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.eight_twelve=e[t].netWeight+Oe.eight_twelve;Oe.eight_twelve=Math.floor(Oe.eight_twelve/1e3*100)/100})),(0,i.pm)("西华","transporter",ye+"T08%3A00%3A00",ye+"T12%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.eight_twelve=e[t].netWeight+Oe.eight_twelve;Oe.eight_twelve=Math.floor(Oe.eight_twelve/1e3*100)/100,Ae.value[2]=Oe.eight_twelve})),(0,i.pm)("红星","transporter",ye+"T12%3A00%3A00",ye+"T16%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.twelve_sixteen=e[t].netWeight+Oe.twelve_sixteen;Oe.twelve_sixteen=Math.floor(Oe.twelve_sixteen/1e3*100)/100})),(0,i.pm)("西华","transporter",ye+"T12%3A00%3A00",ye+"T16%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.twelve_sixteen=e[t].netWeight+Oe.twelve_sixteen;Oe.twelve_sixteen=Math.floor(Oe.twelve_sixteen/1e3*100)/100,Ae.value[3]=Oe.twelve_sixteen})),(0,i.pm)("红星","transporter",ye+"T16%3A00%3A00",ye+"T20%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.sixteen_twenty=e[t].netWeight+Oe.sixteen_twenty;Oe.sixteen_twenty=Math.floor(Oe.sixteen_twenty/1e3*100)/100})),(0,i.pm)("西华","transporter",ye+"T16%3A00%3A00",ye+"T20%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.sixteen_twenty=e[t].netWeight+Oe.sixteen_twenty;Oe.sixteen_twenty=Math.floor(Oe.sixteen_twenty/1e3*100)/100,Ae.value[4]=Oe.four_eight})),(0,i.pm)("红星","transporter",ye+"T20%3A00%3A00",ye+"T24%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.twenty_zero=e[t].netWeight+Oe.twenty_zero;Oe.twenty_zero=Math.floor(Oe.twenty_zero/1e3*100)/100})),(0,i.pm)("西华","transporter",ye+"T20%3A00%3A00",ye+"T24%3A00%3A00",1,1e4).then((function(e){for(let t=0;t<e.length;t++)Oe.twenty_zero=e[t].netWeight+Oe.twenty_zero;Oe.twenty_zero=Math.floor(Oe.twenty_zero/1e3*100)/100,Ae.value[1]=Oe.four_eight})),(0,i.pm)("红星","transporter",new Date(de-5184e5).getFullYear()+"-"+(new Date(de-5184e5).getMonth()+1)+"-"+new Date(de-5184e5).getDate(),new Date(de-432e6).getFullYear()+"-"+(new Date(de-432e6).getMonth()+1)+"-"+new Date(de-432e6).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[0]=1*(Fe.value[0]+xe.value).toFixed(0)})),(0,i.pm)("西华","transporter",new Date(de-5184e5).getFullYear()+"-"+(new Date(de-5184e5).getMonth()+1)+"-"+new Date(de-5184e5).getDate(),new Date(de-432e6).getFullYear()+"-"+(new Date(de-432e6).getMonth()+1)+"-"+new Date(de-432e6).getDate(),1,1e4).then((function(e){be.value=0;for(let t=0;t<e.length;t++)be.value=e[t].netWeight+be.value;be.value=Math.floor(be.value/1e3*100)/100,Fe.value[0]=Fe.value[0]+be.value,Fe.value[0]=Number((Math.floor(100*Fe.value[0])/100).toFixed(0))})),(0,i.pm)("红星","transporter",new Date(de-432e6).getFullYear()+"-"+(new Date(de-432e6).getMonth()+1)+"-"+new Date(de-432e6).getDate(),new Date(de-3456e5).getFullYear()+"-"+(new Date(de-3456e5).getMonth()+1)+"-"+new Date(de-3456e5).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[1]=1*(Fe.value[1]+xe.value).toFixed(0)})),(0,i.pm)("西华","transporter",new Date(de-432e6).getFullYear()+"-"+(new Date(de-432e6).getMonth()+1)+"-"+new Date(de-432e6).getDate(),new Date(de-3456e5).getFullYear()+"-"+(new Date(de-3456e5).getMonth()+1)+"-"+new Date(de-3456e5).getDate(),1,1e4).then((function(e){be.value=0;for(let t=0;t<e.length;t++)be.value=e[t].netWeight+be.value;be.value=Math.floor(be.value/1e3*100)/100,Fe.value[1]=Fe.value[1]+be.value,Fe.value[1]=Number((Math.floor(100*Fe.value[1])/100).toFixed(0))})),(0,i.pm)("红星","transporter",new Date(de-3456e5).getFullYear()+"-"+(new Date(de-3456e5).getMonth()+1)+"-"+new Date(de-3456e5).getDate(),new Date(de-2592e5).getFullYear()+"-"+(new Date(de-2592e5).getMonth()+1)+"-"+new Date(de-2592e5).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[2]=1*(Fe.value[2]+xe.value).toFixed(0)})),(0,i.pm)("西华","transporter",new Date(de-3456e5).getFullYear()+"-"+(new Date(de-3456e5).getMonth()+1)+"-"+new Date(de-3456e5).getDate(),new Date(de-2592e5).getFullYear()+"-"+(new Date(de-2592e5).getMonth()+1)+"-"+new Date(de-2592e5).getDate(),1,1e4).then((function(e){be.value=0;for(let t=0;t<e.length;t++)be.value=e[t].netWeight+be.value;be.value=Math.floor(be.value/1e3*100)/100,Fe.value[2]=Fe.value[2]+be.value,Fe.value[2]=Number((Math.floor(100*Fe.value[2])/100).toFixed(0))})),(0,i.pm)("红星","transporter",new Date(de-2592e5).getFullYear()+"-"+(new Date(de-2592e5).getMonth()+1)+"-"+new Date(de-2592e5).getDate(),new Date(de-1728e5).getFullYear()+"-"+(new Date(de-1728e5).getMonth()+1)+"-"+new Date(de-1728e5).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[3]=1*(Fe.value[3]+xe.value).toFixed(0)})),(0,i.pm)("西华","transporter",new Date(de-2592e5).getFullYear()+"-"+(new Date(de-2592e5).getMonth()+1)+"-"+new Date(de-2592e5).getDate(),new Date(de-1728e5).getFullYear()+"-"+(new Date(de-1728e5).getMonth()+1)+"-"+new Date(de-1728e5).getDate(),1,1e4).then((function(e){be.value=0;for(let t=0;t<e.length;t++)be.value=e[t].netWeight+be.value;be.value=Math.floor(be.value/1e3*100)/100,Fe.value[3]=Fe.value[3]+be.value,Fe.value[3]=Number((Math.floor(100*Fe.value[3])/100).toFixed(0))})),(0,i.pm)("红星","transporter",new Date(de-1728e5).getFullYear()+"-"+(new Date(de-1728e5).getMonth()+1)+"-"+new Date(de-1728e5).getDate(),new Date(de-864e5).getFullYear()+"-"+(new Date(de-864e5).getMonth()+1)+"-"+new Date(de-864e5).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[4]=1*(Fe.value[4]+xe.value).toFixed(0)})),(0,i.pm)("西华","transporter",new Date(de-1728e5).getFullYear()+"-"+(new Date(de-1728e5).getMonth()+1)+"-"+new Date(de-1728e5).getDate(),new Date(de-864e5).getFullYear()+"-"+(new Date(de-864e5).getMonth()+1)+"-"+new Date(de-864e5).getDate(),1,1e4).then((function(e){be.value=0;for(let t=0;t<e.length;t++)be.value=e[t].netWeight+be.value;be.value=Math.floor(be.value/1e3*100)/100,Fe.value[4]=Fe.value[4]+be.value,Fe.value[4]=Number((Math.floor(100*Fe.value[4])/100).toFixed(0))})),(0,i.pm)("红星","transporter",new Date(de-864e5).getFullYear()+"-"+(new Date(de-864e5).getMonth()+1)+"-"+new Date(de-864e5).getDate(),new Date(de).getFullYear()+"-"+(new Date(de).getMonth()+1)+"-"+new Date(de).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[5]=1*(Fe.value[5]+xe.value).toFixed(0)})),(0,i.pm)("西华","transporter",new Date(de-864e5).getFullYear()+"-"+(new Date(de-864e5).getMonth()+1)+"-"+new Date(de-864e5).getDate(),new Date(de).getFullYear()+"-"+(new Date(de).getMonth()+1)+"-"+new Date(de).getDate(),1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[5]=Fe.value[5]+xe.value,Fe.value[5]=Number((Math.floor(100*Fe.value[5])/100).toFixed(0))})),(0,i.pm)("红星","transporter",ye,Me,1,1e4).then((function(e){xe.value=0;for(let t=0;t<e.length;t++)xe.value=e[t].netWeight+xe.value;xe.value=Math.floor(xe.value/1e3*100)/100,Fe.value[6]=1*(Fe.value[6]+xe.value).toFixed(0),Ne.value[1]=Fe.value[6],De.value=e.length,we=parseInt(e.length)%10})),(0,i.pm)("西华","transporter",ye,Me,1,1e4).then((function(e){for(let t=0;t<e.length;t++)be.value=e[t].netWeight+be.value;be.value=Math.floor(be.value/1e3*100)/100,Fe.value[6]=Fe.value[6]+be.value,Fe.value[6]=Number((Math.floor(100*Fe.value[6])/100).toFixed(0)),_e.value=Fe.value[6],Ne.value[1]=Fe.value[6]})),(0,i.pm)("红星","transporter",ye,Me,1,10).then((function(e){Ye.value=e}));for(let l=1;l<7;l++){e++;var t=new Date(de-24*l*60*60*1e3).getFullYear()+"-"+(new Date(de-24*l*60*60*1e3).getMonth()+1)+"-"+new Date(de-24*l*60*60*1e3).getDate(),a=new Date(de-24*l*60*60*1e3).getFullYear()+"-"+(new Date(de-24*l*60*60*1e3).getMonth()+1)+"-"+new Date(de-24*l*60*60*1e3).getDate()+"T"+new Date(de-24*l*60*60*1e3).getHours()+":"+new Date(de-24*l*60*60*1e3).getMinutes()+":"+new Date(de-24*l*60*60*1e3).getSeconds();(0,i.pm)("红星","transporter",t,a,1,1e4).then((function(l){for(let e=0;e<l.length;e++)pe.value=l[e].netWeight+pe.value;(0,i.pm)("西华","transporter",t,a,1,1e4).then((function(t){for(let e=0;e<t.length;e++)pe.value=t[e].netWeight+pe.value;if(6==e){Ne.value[0]=1*(pe.value/1e3/6).toFixed(0);var a=Math.abs(Ne.value[0]-Fe.value[6]);if(a<=Number(.2*Ne.value[0]))ce.value.type="success",ce.value.name="正常";else if(a>Number(.2*Ne.value[0])){var l=Ne.value[0]-Fe.value[6];console.log(l>0),l>0?(ce.value.name="低于预测值的20%",ce.value.type="danger"):(ce.value.name="超过预测值的20%",ce.value.type="danger")}}}))}))}(0,i.pm)("西华","transporter",new Date(de-6048e5).getFullYear()+"-"+(new Date(de-6048e5).getMonth()+1)+"-"+new Date(de-6048e5).getDate(),new Date(de).getFullYear()+"-"+(new Date(de).getMonth()+1)+"-"+new Date(de).getDate(),1,1e4).then((function(e){_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));0<=l&&l<4&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7,We.value[0]=Number(_e.value.toFixed(0)),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));4<=l&&l<8&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7,We.value[1]=Number(_e.value.toFixed(0)),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));8<=l&&l<12&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7,We.value[2]=Number(_e.value.toFixed(0)),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));12<=l&&l<16&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7,We.value[3]=Number(_e.value.toFixed(0)),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));16<=l&&l<20&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7,We.value[4]=Number(_e.value.toFixed(0)),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));20<=l&&l<24&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7,We.value[5]=Number(_e.value.toFixed(0))})),(0,i.pm)("红星","transporter",new Date(de-5184e5).getFullYear()+"-"+(new Date(de-5184e5).getMonth()+1)+"-"+new Date(de-5184e5).getDate(),new Date(de).getFullYear()+"-"+(new Date(de).getMonth()+1)+"-"+new Date(de).getDate(),1,1e4).then((function(e){_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));0<=l&&l<4&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7+categoryOption.series[0].data[0].value,categoryOption.series[0].data[0].value=Number(_e.value.toFixed(0)),category_chart.setOption(categoryOption),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));4<=l&&l<8&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7+categoryOption.series[0].data[1].value,categoryOption.series[0].data[1].value=Number(_e.value.toFixed(0)),category_chart.setOption(categoryOption),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));8<=l&&l<12&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7+categoryOption.series[0].data[2].value,categoryOption.series[0].data[2].value=Number(_e.value.toFixed(0)),category_chart.setOption(categoryOption),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));12<=l&&l<16&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7+categoryOption.series[0].data[3].value,categoryOption.series[0].data[3].value=Number(_e.value.toFixed(0)),category_chart.setOption(categoryOption),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));16<=l&&l<20&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7+categoryOption.series[0].data[4].value,categoryOption.series[0].data[4].value=Number(_e.value.toFixed(0)),category_chart.setOption(categoryOption),_e.value=0;for(let t=0;t<e.length;t++){let a=e[t].exactDate.indexOf("T"),l=Number(e[t].exactDate.substr(a+1,2));20<=l&&l<24&&(_e.value=e[t].netWeight+_e.value)}_e.value=Math.floor(_e.value/1e3*100)/100/7+categoryOption.series[0].data[5].value,categoryOption.series[0].data[5].value=Number(_e.value.toFixed(0)),category_chart.setOption(categoryOption)}))}));const ze=(0,n.qj)({title:{text:"垃圾报警对比"},xAxis:{name:"日期",data:["垃圾预测量",ye+" 今日目前垃圾量"]},yAxis:{name:"垃圾净重",data:"value",min:0,interval:150},series:[{data:Ne,type:"bar",label:{show:!0,formatter:"{value} 吨"}}]}),Te=(0,n.qj)({title:{text:"各时段垃圾平均净重"},xAxis:{name:"日期",data:["0-4点","4-8点","8-12点","12-16点","16-20点","20-24点"]},yAxis:{name:"垃圾净重",data:"value",min:0,interval:20},series:[{data:We,type:"line",label:{show:!0,formatter:"{value} 吨"}}]}),He=(0,n.qj)({title:{text:"过去一周垃圾趋势"},xAxis:{name:"日期",data:[new Date(de-5184e5).getFullYear()+"-"+(new Date(de-5184e5).getMonth()+1)+"-"+new Date(de-5184e5).getDate(),new Date(de-432e6).getFullYear()+"-"+(new Date(de-432e6).getMonth()+1)+"-"+new Date(de-432e6).getDate(),new Date(de-3456e5).getFullYear()+"-"+(new Date(de-3456e5).getMonth()+1)+"-"+new Date(de-3456e5).getDate(),new Date(de-2592e5).getFullYear()+"-"+(new Date(de-2592e5).getMonth()+1)+"-"+new Date(de-2592e5).getDate(),new Date(de-1728e5).getFullYear()+"-"+(new Date(de-1728e5).getMonth()+1)+"-"+new Date(de-1728e5).getDate(),new Date(de-864e5).getFullYear()+"-"+(new Date(de-864e5).getMonth()+1)+"-"+new Date(de-864e5).getDate(),ye]},yAxis:{name:"垃圾净重",data:"value",min:0,interval:200},series:[{data:Fe,type:"bar",label:{show:!0,formatter:"{value} 吨"}}]});(0,n.qj)({title:{text:""},xAxis:{name:"时间段",data:["0点-4点","4点-8点","8点-12点","12点-16点","16点-20点","20点-24点"]},yAxis:{name:"垃圾净重/吨",data:"value",min:0,interval:50},series:[{data:Ae,type:"line",label:{show:!0,formatter:"{value} 吨",style:{}}}]});return(e,u)=>{const o=(0,l.up)("el-header"),i=(0,l.up)("el-option"),v=(0,l.up)("el-select"),g=(0,l.up)("el-date-picker"),h=(0,l.up)("el-button"),d=(0,l.up)("dv-charts"),H=(0,l.up)("el-tag"),S=(0,l.up)("el-option-group"),R=(0,l.up)("el-table-column"),I=(0,l.up)("el-table"),K=(0,l.up)("el-pagination"),B=(0,l.up)("el-main"),E=(0,l.up)("el-container");return(0,l.wg)(),(0,l.j4)(E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o,{style:{"font-size":"25px",padding:"5px"}},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l._)("div",f,[p,(0,l._)("div",c,[(0,l.Wm)(v,{modelValue:(0,n.SU)(q),"onUpdate:modelValue":u[0]||(u[0]=e=>(0,n.dq)(q)?q.value=e:q=e),class:"m-2",placeholder:"选择查询方式",clearable:"",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(L,(e=>(0,l.Wm)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"]),"week"==(0,n.SU)(q)?((0,l.wg)(),(0,l.j4)(g,{key:0,modelValue:(0,n.SU)(V),"onUpdate:modelValue":u[1]||(u[1]=e=>(0,n.dq)(V)?V.value=e:V=e),type:"daterange","start-placeholder":"选择开始时间","range-separator":"到","end-placeholder":"选择结束时间",size:"large","disabled-date":C,onChange:ue},null,8,["modelValue"])):(0,l.kq)("",!0),"month"==(0,n.SU)(q)?((0,l.wg)(),(0,l.j4)(g,{key:1,modelValue:(0,n.SU)(V),"onUpdate:modelValue":u[2]||(u[2]=e=>(0,n.dq)(V)?V.value=e:V=e),type:"monthrange","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间",size:"large","disabled-date":C,onChange:ue},null,8,["modelValue"])):(0,l.kq)("",!0),"day"==(0,n.SU)(q)?((0,l.wg)(),(0,l.j4)(g,{key:2,modelValue:(0,n.SU)(V),"onUpdate:modelValue":u[3]||(u[3]=e=>(0,n.dq)(V)?V.value=e:V=e),type:"daterange",placeholder:"请选择日期","range-separator":"到","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间",size:"large","disabled-date":C,onChange:ue},null,8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(h,{type:"primary",size:"large",style:{"margin-left":"10px"},onClick:se},{default:(0,l.w5)((()=>[(0,l.Uk)("打印报表")])),_:1}),(0,l.Wm)(d,{option:re,style:{width:"95%",height:"40vh",margin:"auto"}},null,8,["option"])])]),D,(0,l._)("div",w,[(0,l._)("div",null,[Y,(0,l._)("div",y,[(0,l.Wm)(d,{option:He,style:{width:"95%",height:"40vh",margin:"auto"}},null,8,["option"])])]),(0,l._)("div",M,[(0,l._)("div",x,[b,(0,l._)("h4",_,[(0,l.Uk)(" 当前状态："),(0,l.Wm)(H,{class:"mx-1",type:ce.value.type,size:"large",style:{"font-size":"x-large"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(ce.value.name),1)])),_:1},8,["type"])]),(0,l.Wm)(d,{option:ze,style:{width:"95%",height:"35vh",margin:"auto"}},null,8,["option"])]),(0,l._)("div",N,[W,(0,l.Wm)(d,{option:Te,style:{width:"95%",height:"39vh",margin:"auto","padding-top":"4vh"}},null,8,["option"])])])]),(0,l._)("div",F,[A,(0,l._)("div",O,[(0,l.Wm)(v,{modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=e=>s.value=e),placeholder:"选择车牌信息",style:{"font-size":"25px"},size:"large",onChange:G},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(j.value,(e=>((0,l.wg)(),(0,l.j4)(i,{key:e.carNumber,label:e.carNumber,value:e.carNumber+e.sitename},{default:(0,l.w5)((()=>[(0,l._)("span",z,(0,r.zw)(e.sitename),1),(0,l._)("span",null,(0,r.zw)(e.carNumber),1)])),_:2},1032,["label","value"])))),128))])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(v,{modelValue:(0,n.SU)(k),"onUpdate:modelValue":u[5]||(u[5]=e=>(0,n.dq)(k)?k.value=e:k=e),class:"m-2",placeholder:"选择查询方式",clearable:"",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(P,(e=>(0,l.Wm)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"]),"week"==(0,n.SU)(k)?((0,l.wg)(),(0,l.j4)(g,{key:0,modelValue:(0,n.SU)(U),"onUpdate:modelValue":u[6]||(u[6]=e=>(0,n.dq)(U)?U.value=e:U=e),type:"week",format:"[Week] ww",placeholder:"请选择某一周",size:"large","disabled-date":C,onChange:G},null,8,["modelValue"])):(0,l.kq)("",!0),"month"==(0,n.SU)(k)?((0,l.wg)(),(0,l.j4)(g,{key:1,modelValue:(0,n.SU)(U),"onUpdate:modelValue":u[7]||(u[7]=e=>(0,n.dq)(U)?U.value=e:U=e),type:"monthrange","range-separator":"到","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间",size:"large","disabled-date":C,onChange:G},null,8,["modelValue"])):(0,l.kq)("",!0),"day"==(0,n.SU)(k)?((0,l.wg)(),(0,l.j4)(g,{key:2,modelValue:(0,n.SU)(U),"onUpdate:modelValue":u[8]||(u[8]=e=>(0,n.dq)(U)?U.value=e:U=e),type:"daterange","range-separator":"到","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间",size:"large","disabled-date":C,onChange:G},null,8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(h,{type:"primary",size:"large",onClick:$,style:{"margin-left":"10px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("打印报表")])),_:1})]),(0,l.Wm)(I,{data:Q.slice(10*((0,n.SU)(a)-1),10*(0,n.SU)(a)),size:e.large,width:"100%",id:"#vcfResult"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{property:"day",label:"时间",width:"300px"}),(0,l.Wm)(R,{property:"siteName",label:"站点",width:"150"}),(0,l.Wm)(R,{property:"carNumber",label:"承运车辆",width:"150"}),(0,l.Wm)(R,{property:"frequency",label:"运输次数",width:"150"}),(0,l.Wm)(R,{property:"totalWeight",label:"运输总量/kg",width:"150"}),(0,l.Wm)(R,{property:"avgWeight",label:"单次平均运输量/kg",width:"200"}),(0,l.Wm)(R,{property:"driver",label:"司机",width:"300"}),(0,l.Wm)(R,{property:"tel",label:"司机电话",width:"300"}),(0,l.Wm)(R,{property:"wechat",label:"司机微信",width:"300"})])),_:1},8,["data","size"])]),(0,l._)("div",T,[(0,l.Wm)(K,{background:"",layout:"total, prev, pager, next, jumper",total:(0,n.SU)(t),"current-page":(0,n.SU)(a),onCurrentChange:Z},null,8,["total","current-page"])])])),_:1})])),_:1})}}};const k=H;var U=k}}]);
//# sourceMappingURL=609.fd379cc9.js.map